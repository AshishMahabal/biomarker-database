<?xml version="1.0" encoding="UTF-8"?>

<!-- Object-Relational Model for the Biomarker Database 
     Author: ahart
     Date: 24.Aug.2007
  -->
  
<model>
	<object type="biomarker">
		<attr name="ID" type="uint" null="no" autoinc="yes" primary="yes" visibility="public" comment="Auto Generated unique MySQL ID"/>
		<attr name="EKE_ID" type="string:80" null="no" visibility="public" comment="..."/>
		<attr name="BiomarkerID" type="string:80" null="no" visibility="public" comment="..."/>
		<attr name="PanelID" type="string:80" null="no" visibility="public" comment="..."/>
		<attr name="Title" type="string:80" null="no" visibility="public" unique="yes" comment="..."/>
		<attr name="Description" type="string:500" null="no" visibility="public" comment="..."/>
		<attr name="QAState" type="string:50" null="no" visibility="public" comment="CHANGEME: to type enum"/>
		<attr name="Phase" type="string:50" null="no" visibility="public" comment="CHANGEME: to type enum"/>
		<attr name="Security" type="string:50" null="no" visibility="public" comment="CHANGEME: to type enum"/>
		<attr name="Type" type="string:60" null="no" visibility="public" comment="..."/>
	</object>
	
	<object type="biomarker_alias">
		<attr name="BiomarkerID" type="uint" null="no" primary="yes" visibility="public"/>
		<attr name="Alias" type="string:80" null="no" primary="yes" visibility="public"/>
	</object>
	
	<object type="study">
		<attr name="ID" type="uint" null="no" autoinc="yes" primary="yes" visibility="public"/>
		<attr name="EDRNID" type="uint" null="no" visibility="public"/>
		<attr name="FHCRC_ID" type="uint" null="no" visibility="public" comment="from the fhcrc website url"/>
		<attr name="DMCC_ID" type="string:80" null="no" visibility="public" comment="from fhcrc website"/>
		<attr name="Title" type="string:80" null="no" unique="yes" visibility="public"/>
		<attr name="Abstract" type="string:5000" null="no" visibility="public"/>
		<attr name="BiomarkerPopulationCharacteristics" type="string:5000" null="no" visibility="public"/>
		<attr name="Design" type="string:50" null="no" visibility="public" comment="fhcrc StudyDesign field"/>
		<attr name="BiomarkerStudyType" type="enum:REGISTERED,UNREGISTERED" default="UNREGISTERED" null="no" visibility="public" comment="whether or not the study is an EDRN study"/>
	</object>
	
	<object type="biomarker_study">
		<attr name="BiomarkerID" type="uint" null="no" primary="yes" visibility="public"/>
		<attr name="StudyID" type="uint" null="no" primary="yes" visibility="public"/>
		<attr name="Sensitivity" type="float" null="no" visibility="public"/>
		<attr name="Specificity" type="float" null="no" visibility="public"/>
		<attr name="PPV" type="float" null="no" visibility="public"/>
		<attr name="NPV" type="float" null="no" visibility="public"/>
		<attr name="Assay" type="uint" null="no" visibility="public"/>
		<attr name="Technology" type="uint" null="no" visibility="public"/>
	</object>
	
	<object type="organ">
		<attr name="ID" type="uint" null="no" autoinc="yes" primary="yes" visibility="public" comment="A unique ID for this organ"/>
		<attr name="Name" type="string:40" null="no" visibility="public" unique="yes" comment="The text of this alias"/>
	</object>
	
	<object type="biomarker_organ">
		<attr name="BiomarkerID" type="uint" null="no" primary="yes" visibility="public"/>
		<attr name="OrganSite" type="uint" null="no" primary="yes" visibility="public"/>
		<attr name="SensitivityMin" type="float" null="no" visibility="public"/>
		<attr name="SensitivityMax" type="float" null="no" visibility="public"/>
		<attr name="SensitivityComment" type="string:500" null="no" visibility="public"/>
		<attr name="SpecificityMin" type="float" null="no" visibility="public"/>
		<attr name="SpecificityMax" type="float" null="no" visibility="public"/>
		<attr name="SpecificityComment" type="string:500" null="no" visibility="public"/>
		<attr name="PPVMin" type="float" null="no" visibility="public"/>
		<attr name="PPVMax" type="float" null="no" visibility="public"/>
		<attr name="PPVComment" type="string:500" null="no" visibility="public"/>
		<attr name="NPVMin" type="float" null="no" visibility="public"/>
		<attr name="NPVMax" type="float" null="no" visibility="public"/>
		<attr name="NPVComment" type="string:500" null="no" visibility="public"/>
	</object>	
	
	<object type="publication">
		<attr name="ID" type="uint" null="no" autoinc="yes" primary="yes" visibility="public"/>
		<attr name="PubMedID" type="string:40" null="no" unique="yes" visibility="public"/>
		<attr name="Title" type="string:120" null="no" visibility="public"/>
		<attr name="Author" type="string:120" null="no" visibility="public"/>
		<attr name="Journal" type="string:120" null="no" visibility="public"/>
		<attr name="Volume" type="string:40" null="no" visibility="public"/>
		<attr name="Issue" type="string:40" null="no" visibility="public"/>
		<attr name="Year" type="uint" null="no" visibility="public"/>
	</object>
	
	<object type="biomarker_publication">
		<attr name="PublicationID" type="uint" null="no" primary="yes" visibility="public"/>
		<attr name="BiomarkerID" type="uint" null="no" primary="yes" visibility="public"/>
	</object>
	
	<object type="biomarker_organ_publication">
		<attr name="PublicationID" type="uint" null="no" primary="yes" visibility="public"/>
		<attr name="BiomarkerID" type="uint" null="no" primary="yes" visibility="public"/>
		<attr name="OrganSite" type="uint" null="no" primary="yes" visibility="public"/>
	</object>
	
	<object type="study_publication">
		<attr name="PublicationID" type="uint" primary="yes" visibility="public"/>
		<attr name="StudyID" type="uint" primary="yes" visibility="public"/>
	</object>


	
	<object type="resource">
		<attr name="ID" type="uint" null="no" autoinc="yes" primary="yes" visibility="public" comment="..."/>
		<attr name="Name" type="string:60" null="no" visibility="public" comment="..."/>
		<attr name="URL" type="string:128" null="no" visibility="public"/>
	</object>
	
	<object type="biomarker_resource">
		<attr name="BiomarkerID" type="uint" null="no" primary="yes" visibility="public" comment="..."/>
		<attr name="ResourceID" type="uint" null="no" primary="yes" visibility="public" comment="..."/>
	</object>
	
	<object type="biomarker_organ_resource">
		<attr name="BiomarkerID" type="uint" null="no" primary="yes" visibility="public"/>
		<attr name="OrganSite" type="uint" null="no" primary="yes" visibility="public"/>
		<attr name="ResourceID" type="uint" null="no" primary="yes" visibility="public"/>
	</object>
	
	<object type="study_resource">
		<attr name="StudyID" type="uint" null="no" primary="yes" visibility="public"/>
		<attr name="ResourceID" type="uint" null="no" primary="yes" visibility="public"/>
	</object>
	
	<object type="person">
		<attr name="ID" type="uint" null="no" autoinc="yes" primary="yes" visibility="public" comment="..."/>
		<attr name="FirstName" type="string:20" null="no" visibility="public"/>
		<attr name="LastName" type="string:20" null="no" visibility="public"/>
	</object>
	
	<object type="site">
		<attr name="ID" type="uint" null="no" autoinc="yes" primary="yes" visibility="public" comment="..."/>
		<attr name="Name" type="string:120" null="no" visibility="public"/>
	</object>
	
	<object type="person_site">
		<attr name="PersonID" type="uint" null="no" primary="yes" visibility="public" comment="..."/>
		<attr name="SiteID" type="uint" null="no" primary="yes" visibility="public"/>
		<attr name="Title" type="string:80" null="no" visibility="public"/>
		<attr name="Specialty" type="string:80" null="no" visibility="public"/>
		<attr name="Phone" type="string:20" null="no" visibility="public"/>
		<attr name="Fax" type="string:20" null="no" visibility="public"/>
		<attr name="Email" type="string:80" null="no" visibility="public"/>
	</object>
	

	
	<relation object="person">
		<has quantity="many" type="peer" class="person_site" onDeletePeer="persist" name="site" visibility="public" map="ID|PersonID"/>
	</relation>
	
	<relation object="site">
		<has quantity="many" type="peer" class="person_site" onDeletePeer="persist" name="people" visibility="public" map="ID|SiteID"/>
	</relation>
	
	<relation object="person_site">
		<has quantity="one" type="parent" class="person" name="person" visibility="public" map="PersonID|ID"/>
		<has quantity="one" type="parent" class="site" name="site" visibility="public" map="SiteID|ID"/>
	</relation>
	
	
	
	
	
	<relation object="biomarker">
		<has quantity="many" type="child" class="biomarker_alias" onDeleteParent="delete" lazy="yes" name="aliases" visibility="public" map="ID|BiomarkerID"/>
		<has quantity="many" type="peer" class="biomarker_study" onDeletePeer="persist" lazy="fetch" name="studies" visibility="public" map="ID|BiomarkerID"/> 
		<has quantity="many" type="peer" class="biomarker_organ" onDeletePeer="persist" lazy="fetch" name="organs" visibility="public" map="ID|BiomarkerID"/>
		<has quantity="many" type="peer" class="biomarker_publication" onDeletePeer="persist" name="publications" visibility="public" map="ID|BiomarkerID"/>
		<has quantity="many" type="peer" class="biomarker_resource" onDeletePeer="persist" name="resources" visibility="public" map="ID|BiomarkerID"/>
	</relation>
	
	<relation object="biomarker_study">
		<has quantity="one" type="peer" class="study" onDeletePeer="delete" lazy="fetch" visibility="public" name="study" map="StudyID|ID"/>
		<has quantity="one" type="parent" class="biomarker" onDeletePeer="persist" lazy="fetch" visibility="public" name="biomarker" map="BiomarkerID|ID"/>
	</relation>
	
	<relation object="biomarker_organ">
		<has quantity="one" type="parent" class="organ" visibility="public" name="organ" map="OrganSite|ID"/>
		<has quantity="one" type="parent" class="biomarker" visibility="public" name="biomarker" map="BiomarkerID|ID"/>
		<has quantity="many" type="peer" class="biomarker_organ_resource" onDeletePeer="persist" visibility="public" name="resources" map="BiomarkerID|BiomarkerID,OrganSite|OrganSite"/>
		<has quantity="many" type="peer" class="biomarker_organ_publication" onDeletePeer="persist" visibility="public" name="publications" map="BiomarkerID|BiomarkerID,OrganSite|OrganSite"/>
	</relation>
	
	<relation object="biomarker_publication">
		<has quantity="one" type="parent" class="publication" visibility="public" name="publication" map="PublicationID|ID"/>
		<has quantity="one" type="parent" class="biomarker" visibility="public" name="biomarker" map="BiomarkerID|ID"/>
	</relation>
	
	<relation object="biomarker_organ_publication">
		<has quantity="one" type="parent" class="publication" visibility="public" name="publication" map="PublicationID|ID"/>
		<has quantity="one" type="parent" class="biomarker_organ" visibility="public" name="biomarker_organ" map="BiomarkerID|BiomarkerID,OrganSite|OrganSite"/>
	</relation>
	
	<relation object="biomarker_resource">
		<has quantity="one" type="child" class="resource" visibility="public" name="resource" map="ResourceID|ID"/>
		<has quantity="one" type="parent" class="biomarker" visibility="public" name="biomarker" map="BiomarkerID|ID"/>
	</relation>
	
	<relation object="biomarker_organ_resource">
		<has quantity="one" type="child" class="resource" visibility="public" name="resource" map="ResourceID|ID"/>
		<has quantity="one" type="parent" class="biomarker_organ" visibility="public" name="biomarker_organ" map="BiomarkerID|BiomarkerID,OrganSite|OrganSite"/>
	</relation>
	
	
	
	<relation object="organ">
		<has quantity="many" type="peer" class="biomarker_organ" onDeletePeer="delete" lazy="fetch" visibility="public" name="biomarkers" map="ID|BiomarkerID"/>
	</relation>
	
	<relation object="study">
		<has quantity="many" type="peer" class="biomarker_study" onDeletePeer="persist" visibility="public" name="biomarkers" map="ID|StudyID"/>
		<has quantity="many" type="peer" class="study_publication" onDeletePeer="persist" visibility="public" name="publications" map="ID|StudyID"/>
		<has quantity="many" type="peer" class="study_resource" onDeletePeer="persist" visibility="public" name="resources" map="ID|StudyID"/>
	</relation>

	<relation object="publication">
		<has quantity="many" type="peer" class="biomarker_publication" onDeletePeer="persist" visibility="public" name="biomarkers" map="ID|PublicationID"/>
		<has quantity="many" type="peer" class="biomarker_organ_publication" onDeletePeer="persist" visibility="public" name="biomarker_organs" map="ID|PublicationID"/>
		<has quantity="many" type="peer" class="study_publication" onDeletePeer="persist" visibility="public" name="studies" map="ID|PublicationID"/>
	</relation>
	
	<relation object="resource">
		<has quantity="many" type="peer" class="biomarker_resource" onDeletePeer="persist" visibility="public" name="biomarkers" map="ID|ResourceID"/>
		<has quantity="many" type="peer" class="biomarker_organ_resource" onDeletePeer="persist" visibility="public" name="biomarker_organs" map="ID|ResourceID"/>
		<has quantity="many" type="peer" class="study_resource" onDeletePeer="persist" visibility="public" name="studies" map="ID|ResourceID"/>
	</relation>
	
	<relation object="study_publication">
		<has quantity="one" type="parent" class="publication" visibility="public" name="publication" map="PublicationID|ID"/>
		<has quantity="one" type="parent" class="study" visibility="public" name="study" map="StudyID|ID"/>
	</relation>
	
	<relation object="study_resource">
		<has quantity="one" type="child" class="study" visibility="public" name="study" map="StudyID|ID"/>
		<has quantity="one" type="parent" class="resource" visibility="public" name="resource" map="ResourceID|ID"/>
	</relation>
	
	
	

	
	
	
	<rdfinfo object="study" resourcePath="editors/showStudy.php" parameters="s:ID"/>
	<rdfinfo object="biomarker_study" resourcePath="" parameters="" hidden="yes"/>
	<rdfinfo object="biomarker" resourcePath="editors/showBiomarker.php" parameters="m:ID"/>
	<rdfinfo object="organ" resourcePath="editors/showOrgan.php" parameters="o:ID"/>
	<rdfinfo object="biomarker_organ" resourcePath="editors/showBiomarkerOrgan.php" parameters="b:BiomarkerID,o:OrganSite"/>
	<rdfinfo object="publication" resourcePath="editors/showPublication.php" parameters="p:ID"/>
	<rdfinfo object="biomarker_publication" resourcePath="" parameters="" hidden="yes"/>
	<rdfinfo object="study_publication" resourcePath="" parameters="" hidden="yes"/>
</model>